τ# Εγχειρίδιο Τεκμηρίωσης
## Μεσαιωνικό Χωριό – Εργασία Εικονικής Πραγματικότητας 2025-2026
### Τμήμα Πληροφορικής, Πανεπιστήμιο Πειραιά

---

> **Οδηγίες χρήσης:** Κάθε σημείο με `[ΣΥΜΠΛΗΡΩΣΗ]` χρειάζεται δικό σας περιεχόμενο. Τα σημεία με `[SCREENSHOT]` χρειάζονται στιγμιότυπο οθόνης από το Unity ή το build. Τα σημεία με `[ΕΤΟΙΜΟ]` είναι προσυμπληρωμένα βάσει των συστημάτων που αναπτύξαμε — απλώς επαληθεύστε ότι ταιριάζουν με την τελική σας υλοποίηση.

---

## α. Εισαγωγή

Η παρούσα εργασία εκπονήθηκε στο πλαίσιο του μαθήματος Εικονική Πραγματικότητα του Προπτυχιακού Προγράμματος Σπουδών του Τμήματος Πληροφορικής του Πανεπιστημίου Πειραιά, για το ακαδημαϊκό έτος 2025-2026. Το αντικείμενο της εργασίας είναι η δημιουργία ενός τρισδιάστατου διαδραστικού χώρου εικονικής πραγματικότητας, με θέμα ένα μεσαιωνικό χωριό δικής μας έμπνευσης.

Το εικονικό περιβάλλον που αναπτύχθηκε αναπαριστά ένα ζωντανό μεσαιωνικό οικισμό, ο οποίος περιλαμβάνει ένα κάστρο, μια εκκλησία, ένα νεκροταφείο, μια αγορά, κατοικίες, ένα ρυάκι, βουνά, λουλούδια και πυκνή βλάστηση. Ο χρήστης μπορεί να εξερευνήσει ελεύθερα τον χώρο, να αλληλεπιδράσει με χαρακτήρες και αντικείμενα, να παρατηρήσει αυτόνομα κινούμενα ζώα και να βιώσει ένα δυναμικό ηχητικό περιβάλλον που μεταβάλλεται ανάλογα με τη θέση του στον κόσμο.

Για την ανάπτυξη της εφαρμογής χρησιμοποιήθηκε η μηχανή παιχνιδιών **Unity Engine** και η γλώσσα προγραμματισμού **C#**. Τα τρισδιάστατα assets προέρχονται κυρίως από το **SYNTY Polygon Medieval Pack**, το οποίο εξασφαλίζει οπτική συνέπεια και καλαίσθητο αποτέλεσμα σε όλη την εφαρμογή.

`[ΣΥΜΠΛΗΡΩΣΗ]` — Ονόματα και αριθμοί μητρώου μελών ομάδας.

---

## β. Περιγραφή του Προβλήματος

### Το πρόβλημα

Ο σχεδιασμός και η ανάπτυξη ενός πειστικού εικονικού κόσμου αποτελεί ένα πολύπλευρο τεχνικό και αισθητικό πρόβλημα. Δεν αρκεί η απλή τοποθέτηση τρισδιάστατων μοντέλων σε ένα περιβάλλον· ο κόσμος πρέπει να "αναπνέει", να εξελίσσεται με τον χρόνο και να ανταποκρίνεται στις ενέργειες του χρήστη με λογικό και συνεκτικό τρόπο.

Στη συγκεκριμένη εργασία, το κεντρικό ζητούμενο ήταν η δημιουργία ενός μεσαιωνικού χωριού το οποίο να παρέχει μια ολοκληρωμένη εμπειρία εξερεύνησης. Αυτό σημαίνει ότι έπρεπε να επιλυθούν ταυτόχρονα προβλήματα πλοήγησης, αλληλεπιδρασιμότητας, ηχητικής εμβύθισης, οπτικής αληθοφάνειας και απόδοσης (performance).

### Οι προκλήσεις

Οι βασικές προκλήσεις που αντιμετωπίσαμε κατά την ανάπτυξη ήταν οι εξής:

**Αληθοφάνεια περιβάλλοντος:** Ένας στατικός κόσμος χωρίς κίνηση και ήχο αισθάνεται "νεκρός". Έπρεπε να σχεδιαστούν και να υλοποιηθούν συστήματα που προσφέρουν ζωή στο περιβάλλον χωρίς να επιβαρύνουν υπερβολικά την απόδοση — από αυτόνομα ζώα έως κινούμενα σύννεφα και ρέον νερό.

**Διαχείριση ήχου:** Η απλή αναπαραγωγή ενός ambient ήχου σε loop δεν αρκεί για να δημιουργηθεί αίσθηση βάθους. Χρειαζόταν ένα σύστημα που να επιτρέπει σε διαφορετικές περιοχές του χωριού (αγορά, εκκλησία, νεκροταφείο, ρυάκι) να έχουν τον δικό τους ηχητικό χαρακτήρα, ο οποίος να εντείνεται όσο ο παίκτης πλησιάζει.

**Αλληλεπιδρασιμότητα:** Οι χρήστες προσδοκούν να μπορούν να αλληλεπιδρούν με τον κόσμο γύρω τους — να ανοίγουν πόρτες, να μιλούν με χαρακτήρες, να "ζουν" μέσα στον κόσμο και όχι απλώς να τον παρατηρούν. Η υλοποίηση αυτής της λειτουργικότητας με καθαρό, επεκτάσιμο κώδικα αποτελούσε βασική προτεραιότητα.

**Βελτιστοποίηση:** Ένα πλούσιο τρισδιάστατο περιβάλλον με πολλά assets, φωτισμό, ήχο και κινούμενα στοιχεία μπορεί εύκολα να οδηγήσει σε προβλήματα απόδοσης. Έπρεπε να εφαρμοστούν τεχνικές βελτιστοποίησης (occlusion culling, LOD groups, static batching, baked lighting) ώστε η εφαρμογή να τρέχει ομαλά.

### Τι επιλέξαμε να μην υλοποιήσουμε

Σκόπιμα δεν συμπεριλήφθηκαν εχθροί, σύστημα μάχης, υγεία ή inventory. Η εστίαση της εργασίας είναι στην **εξερεύνηση και την ατμόσφαιρα** — στοιχεία που αξιολογούνται άμεσα από τα κριτήρια αληθοφάνειας, πληρότητας, κίνησης και λειτουργικότητας, χωρίς να αυξάνεται αδικαιολόγητα η πολυπλοκότητα.

---

## γ. Φάσεις Ανάπτυξης

### γ.1 Ανάλυση

Κατά την αρχική φάση ανάλυσης, προσδιορίστηκαν οι λειτουργικές και μη λειτουργικές απαιτήσεις της εφαρμογής.

**Λειτουργικές απαιτήσεις:**

- Ο παίκτης μπορεί να περιηγείται ελεύθερα σε όλο τον χώρο του χωριού με φυσικό έλεγχο κίνησης
- Ο παίκτης μπορεί να πλησιάζει NPCs, να ξεκινά διάλογο και να διαβάζει γραμμές κειμένου
- Ο παίκτης μπορεί να αλληλεπιδρά με αντικείμενα του κόσμου (πόρτες, μπαούλα)
- Ζώα κινούνται αυτόνομα στο περιβάλλον χωρίς καμία εμπλοκή του χρήστη
- Ο ήχος μεταβάλλεται ανάλογα με την τοποθεσία του παίκτη στον κόσμο
- Κινούμενα στοιχεία (φλόγες, σύννεφα, νερό, ζώα) δίνουν ζωή στο περιβάλλον

**Μη λειτουργικές απαιτήσεις:**

- Ομαλή απόδοση (στόχος 60fps) σε τυπικό υπολογιστή
- Αισθητική συνέπεια σε όλα τα στοιχεία του κόσμου
- Διαισθητικοί χειρισμοί που δεν απαιτούν οδηγίες
- Κώδικας καλά σχολιασμένος, δομημένος και εύκολα επεκτάσιμος

---

### γ.2 Σχεδιασμός

#### Διάταξη χώρου

Ο κόσμος χωρίζεται σε διακριτές ζώνες με διαφορετικό χαρακτήρα:

- **Κεντρική πλατεία & Αγορά** — ο πιο πολυσύχναστος χώρος, με NPCs, ήχους πλήθους και ηχητική ζώνη υψηλής έντασης
- **Εκκλησία** — ήσυχος χώρος με ατμοσφαιρικό φωτισμό, ιερέα NPC, διαδραστική πόρτα και ήχο οργάνου
- **Νεκροταφείο** — σκοτεινή, ατμοσφαιρική γωνιά με ήχους ανέμου και νυχτερινής φύσης, NPC νεκροθάφτης
- **Κάστρο** — κυρίαρχο στοιχείο του ορίζοντα, με φρουρό NPC και διαδραστική πύλη
- **Ρυάκι** — ήρεμη περιοχή με ήχο νερού, βλάστηση, ζώα που πλησιάζουν για νερό
- **Ανακοινωτική πινακίδα** — στην κεντρική πλατεία, εμφανίζει πηγές assets εντός του κόσμου

`[SCREENSHOT]` — Κάτοψη του χωριού από το Scene view του Unity

#### Αρχιτεκτονικές αποφάσεις

**ScriptableObject pattern για δεδομένα:** Τόσο τα δεδομένα των NPCs (DialogueData) όσο και τα δεδομένα των ζώων (AnimalData) αποθηκεύονται σε ScriptableObjects. Αυτό σημαίνει ότι η προσθήκη νέου NPC ή νέου είδους ζώου δεν απαιτεί αλλαγές στον κώδικα — απλώς δημιουργείται ένα νέο asset στο Project window και συνδέεται με το prefab. Η προσέγγιση αυτή ακολουθεί βέλτιστες πρακτικές ανάπτυξης λογισμικού (διαχωρισμός δεδομένων από λογική).

**Singleton pattern για managers:** Οι κεντρικές υπηρεσίες της εφαρμογής (DialogueManager, AmbientSoundManager) υλοποιούνται ως singletons. Αυτό επιτρέπει σε οποιοδήποτε script να έχει πρόσβαση σε αυτά χωρίς αναφορές Inspector, εξασφαλίζοντας παράλληλα ότι υπάρχει μόνο μία ενεργή παρουσία καθενός.

**Interface για Interactables:** Όλα τα αλληλεπιδραστικά αντικείμενα υλοποιούν το interface `IInteractable`. Αυτό επιτρέπει στο σύστημα raycast του παίκτη να αντιδρά σε οποιοδήποτε αλληλεπιδραστικό αντικείμενο ανεξαρτήτως τύπου, ακολουθώντας την αρχή Open/Closed του αντικειμενοστραφούς σχεδιασμού.

**Component-based audio zones:** Κάθε αντικείμενο του κόσμου που έχει χαρακτηριστικό ήχο (αγορά, τζάκι, εκκλησία, ρυάκι) φέρει ένα `ProximityAudioZone` component. Αυτό κάνει το σύστημα ήχου πλήρως moduλαρ — προσθέτουμε ή αφαιρούμε ηχητικές ζώνες χωρίς να αγγίζουμε κώδικα.

#### Αρχιτεκτονική scripts

```
Assets/MyProject/myScripts/
├── Interact/
│   ├── IInteractable.cs            ← interface για αλληλεπιδραστικά αντικείμενα
│   ├── Interactor.cs               ← ανιχνεύει και ενεργοποιεί Interactables (στην κάμερα)
│   ├── InteractorUI.cs             ← εμφανίζει μηνύματα από interactables
│   ├── Door.cs                     ← animation ανοίγματος/κλεισίματος πόρτας
│   ├── Chest.cs                    ← animation ανοίγματος/κλεισίματος μπαούλου
│   ├── Lever.cs                    ← μοχλός που ελέγχει CastleGate
│   ├── CastleGate.cs               ← πύλη κάστρου (portcullis)
│   └── TextSign.cs                 ← πινακίδες με κείμενο
├── Dialogue/
│   ├── DialogueData.cs             ← ScriptableObject (όνομα NPC + γραμμές)
│   ├── DialogueManager.cs          ← singleton, ελέγχει το UI διαλόγου
│   ├── InteractableNPC.cs          ← NPC με διάλογο (πάτα E)
│   └── ProximityNPC.cs             ← NPC με αυτόματο διάλογο (trigger zone)
├── Animals/
│   ├── AnimalData.cs               ← ScriptableObject παραμέτρων ζώου
│   └── AnimalController.cs         ← αυτόνομη κίνηση μέσω NavMesh
├── Ambient/
│   ├── ScrollingWater.cs           ← UV scrolling για νερό
│   └── CloudDrift.cs               ← κίνηση/περιστροφή σύννεφων
├── Audio/
│   ├── AmbientSoundManager.cs      ← global ambient loop + ducking
│   ├── ProximityAudioZone.cs       ← ένταση βάσει απόστασης παίκτη
│   └── AudioZoneDucker.cs          ← μειώνει ambient κοντά σε zones
└── UI/
    ├── MainMenu.cs                 ← κύριο μενού (Start/Exit)
    └── PauseMenu.cs                ← μενού παύσης (Escape key)
```

---

### γ.3 Υλοποίηση

#### Σύστημα πλοήγησης (Character Controller)

Για τον έλεγχο του παίκτη χρησιμοποιήθηκε το **Unity Starter Assets (Third Person Character Controller)**. Ρυθμίστηκαν η ταχύτητα κίνησης, η ευαισθησία του ποντικιού και ο έλεγχος κάμερας. Προστέθηκε το `Interactor.cs` στην κάμερα του παίκτη, το οποίο εκπέμπει raycast εμπρός και εντοπίζει αντικείμενα με tag "Interactable" που υλοποιούν το `IInteractable` interface, εμφανίζοντας κατάλληλο prompt και καλώντας `OnInteract()` στο πάτημα του E.

`[SCREENSHOT]` — Inspector του Player GameObject με όλα τα components

#### Σύστημα διαλόγου NPC

Το σύστημα διαλόγου σχεδιάστηκε με έμφαση στην επαναχρησιμοποίηση. Κάθε NPC συνδέεται με ένα `DialogueData` ScriptableObject asset που περιέχει το όνομά του και τις γραμμές διαλόγου του. Υλοποιήθηκαν δύο τύποι NPCs:

- **InteractableNPC.cs** — Ο παίκτης πατά E για να ξεκινήσει τον διάλογο (υλοποιεί το `IInteractable` interface)
- **ProximityNPC.cs** — Ο διάλογος ξεκινά αυτόματα όταν ο παίκτης μπει στο trigger zone, με την κάμερα να στρέφεται προς τον NPC

Ο `DialogueManager` singleton ελέγχει το UI panel. Ο παίκτης πατά E για να προχωρά στις γραμμές. Κατά τη διάρκεια του διαλόγου το `PauseMenu` μπορεί να απενεργοποιήσει την κίνηση ώστε ο χρήστης να μπορεί να διαβάσει άνετα.

Τοποθετήθηκαν συνολικά **4 NPCs** με μοναδικό διάλογο:
- **Σιδηρουργός** — στην αγορά, μιλά για τη δουλειά του και τα εργαλεία του
- **Ιερέας** — κοντά στην εκκλησία, αναφέρεται στο ιστορικό του χωριού
- **Νεκροθάφτης** — στο νεκροταφείο, με ατμοσφαιρικούς διαλόγους
- **Φρουρός** — στο κάστρο, δίνει πληροφορίες για τον χώρο

`[SCREENSHOT]` — Σύστημα διαλόγου ανοιχτό, κείμενο NPC ορατό στο UI

#### Σύστημα αλληλεπιδραστικών αντικειμένων

Υλοποιήθηκε σύστημα βασισμένο στο interface `IInteractable` με πολλαπλές υλοποιήσεις:

- **Door.cs** — Πόρτα που περιστρέφεται στον Y άξονα με coroutine animation
- **Chest.cs** — Μπαούλο με καπάκι που περιστρέφεται στον X άξονα, προαιρετικό μήνυμα περιεχομένου
- **Lever.cs** — Μοχλός που ελέγχει μια CastleGate (πύλη)
- **CastleGate.cs** — Κάθετη πύλη (portcullis) που ανεβαίνει/κατεβαίνει
- **TextSign.cs** — Πινακίδες που εμφανίζουν κείμενο όταν ο παίκτης αλληλεπιδρά

Το `Interactor.cs` αναλαμβάνει την ανίχνευση και κλήση μέσω raycast, χωρίς να χρειάζεται να γνωρίζει τον τύπο του αντικειμένου.

Τοποθετήθηκαν: πόρτες, πύλη κάστρου με μοχλό, μπαούλα, πινακίδες `[ΣΥΜΠΛΗΡΩΣΗ — τοποθεσίες]`.

`[SCREENSHOT]` — Prompt αλληλεπίδρασης ορατό μπροστά από πόρτα

#### Σύστημα ζώων

Τα ζώα χρησιμοποιούν **NavMeshAgent** για κίνηση στο terrain και state machine δύο καταστάσεων (Idle / Walking) που υλοποιείται με coroutine. Στην κατάσταση Idle το ζώο αναμένει τυχαίο χρόνο μεταξύ `minIdleTime` και `maxIdleTime`. Στη συνέχεια επιλέγεται τυχαίο σημείο εντός `wanderRadius` μέσω `NavMesh.SamplePosition` και το ζώο κινείται εκεί.

Τα animations ελέγχονται μέσω της παραμέτρου `Speed` του Animator (`animator.SetFloat("Speed", velocity.magnitude)`). Ο Animator Controller χρησιμοποιεί blend tree ή transitions βασισμένα στην ταχύτητα για να εναλλάσσει μεταξύ idle και walk animations.

Όλες οι παράμετροι (ταχύτητα, ακτίνα περιπλάνησης, χρόνοι) αποθηκεύονται σε `AnimalData` ScriptableObjects. Εφαρμόστηκε σε: `[ΣΥΜΠΛΗΡΩΣΗ — κατσίκες, πρόβατα κ.ά.]`.

`[SCREENSHOT]` — Ζώο στον κόσμο, Inspector με AnimalData asset συνδεδεμένο

#### Σύστημα ήχου εγγύτητας

Αποτελεί ένα από τα πιο πρωτότυπα στοιχεία της εφαρμογής. Ο `AmbientSoundManager` αναπαράγει συνεχώς έναν global ambient ήχο (αέρας, πουλιά, γενική ατμόσφαιρα χωριού). Κάθε χαρακτηριστικός χώρος του κόσμου φέρει ένα `ProximityAudioZone` component με δικό του AudioSource, ακτίνα (`radius`) και μέγιστη ένταση (`maxVolume`).

Κάθε frame, το `ProximityAudioZone` υπολογίζει την απόσταση του παίκτη και ορίζει την ένταση μέσω `Mathf.InverseLerp` — η ένταση γίνεται 0 στα όρια της ακτίνας και φτάνει στο `maxVolume` στο κέντρο. Το `AudioZoneDucker` παρακολουθεί όλες τις ζώνες και "χαμηλώνει" τον ambient ήχο ανάλογα με την πιο δυνατή ενεργή ζώνη, δημιουργώντας φυσική ηχητική ιεράρχηση.

Παραδείγματα ρύθμισης:
- Αγορά: `radius = 15`, `maxVolume = 0.9` (πολυσύχναστη, δυνατή)
- Τζάκι: `radius = 5`, `maxVolume = 0.35` (τοπικός, ήσυχος)
- Ρυάκι: `radius = 10`, `maxVolume = 0.6` (μέτριος, χαλαρωτικός)
- Εκκλησία: `radius = 12`, `maxVolume = 0.5` (ατμοσφαιρικός)

`[SCREENSHOT]` — Inspector ProximityAudioZone στο αντικείμενο αγοράς

#### Κινούμενα στοιχεία περιβάλλοντος

Για να αποκτήσει ζωή ο κόσμος, υλοποιήθηκαν τα εξής:

- **Συστήματα σωματιδίων (Particle Systems)** σε όλες τις λαμπάδες και τζάκια — φλόγα με embers
- **ScrollingWater.cs** — UV scrolling για το ρυάκι, προσομοιώνει ροή νερού με κινούμενο texture
- **CloudDrift.cs** — σύννεφα που κινούνται γραμμικά ή περιστρέφονται γύρω από σημείο, με wrap-around
- **Ζώα με AI** — κατσίκες και πρόβατα που περιπλανιούνται αυτόνομα μέσω NavMesh

`[SCREENSHOT]` — Particle system λαμπάδας ανοιχτό στον Inspector

#### Σύστημα μενού (UI)

Υλοποιήθηκε πλήρες σύστημα μενού με δύο components:

- **MainMenu.cs** — Κύριο μενού με κουμπιά Start Game και Exit. Το Start φορτώνει τη σκηνή "GameScene1".
- **PauseMenu.cs** — Μενού παύσης που ενεργοποιείται με το Escape key (Unity New Input System). Παγώνει τον χρόνο (Time.timeScale = 0), απενεργοποιεί το PlayerInput component ώστε η κάμερα να μην κινείται, και ξεκλειδώνει τον cursor για πλοήγηση στο μενού.

`[SCREENSHOT]` — Pause menu ανοιχτό στο παιχνίδι

#### Φωτισμός

Χρησιμοποιήθηκε **Mixed Lighting** με έναν κεντρικό Directional Light ως ήλιο (θερμό κίτρινο-πορτοκαλί χρώμα). Ψήθηκαν (baked) τα lightmaps για στατικά αντικείμενα, ελαχιστοποιώντας τον αριθμό real-time υπολογισμών. Γύρω από κάθε λαμπάδα και τζάκι τοποθετήθηκαν **Point Lights** με θερμό πορτοκαλί χρώμα και μικρή ακτίνα. Στο εσωτερικό της εκκλησίας χρησιμοποιήθηκε πιο δροσερό, γαλαζωπό ambient φως.

`[SCREENSHOT]` — Lighting Settings panel, Generate Lighting
`[SCREENSHOT]` — Νυχτερινή σκηνή με φωτισμένες λαμπάδες

#### Βελτιστοποίηση απόδοσης

`[SCREENSHOT]` — Stats window πριν και μετά τη βελτιστοποίηση

Εφαρμόστηκαν οι εξής τεχνικές βελτιστοποίησης:

- **Static Batching:** Όλα τα στατικά αντικείμενα (κτίρια, τοίχοι, δρόμοι, δέντρα) σημάνθηκαν ως Static στον Inspector, επιτρέποντας στη μηχανή να τα συγχωνεύσει σε λιγότερα draw calls
- **Occlusion Culling:** Ψήθηκε (baked) το occlusion culling μέσω Window > Rendering > Occlusion Culling, ώστε αντικείμενα που δεν είναι ορατά από τον παίκτη να μην αποδίδονται καθόλου
- **LOD Groups:** Τοποθετήθηκαν LOD Groups στο κάστρο και την εκκλησία (LOD0: πλήρης λεπτομέρεια, LOD1: μειωμένη, LOD2: ελάχιστη), μειώνοντας τον αριθμό polygons για μακρινά αντικείμενα
- **Baked Lightmaps:** Εξαλείφθηκαν οι real-time σκιές για στατικά αντικείμενα μέσω pre-baked φωτισμού

`[SCREENSHOT]` — Occlusion Culling panel μετά το bake
`[SCREENSHOT]` — LOD Group component στον Inspector κάστρου

---

## δ. Πίνακας Scripts

| Script | Φάκελος | Περιγραφή |
|--------|---------|-----------|
| `IInteractable.cs` | Interact/ | Interface που ορίζει το συμβόλαιο για όλα τα αλληλεπιδραστικά αντικείμενα. Περιλαμβάνει: InteractionPrompt (string), OnInteract(), OnEndInteract(), OnReadyInteract(), OnAbortInteract(). |
| `Interactor.cs` | Interact/ | Τοποθετείται στην κάμερα του παίκτη. Εκπέμπει raycast εμπρός κάθε frame. Εάν εντοπίσει αντικείμενο με tag "Interactable" και IInteractable component, εμφανίζει UI prompt. Στο πάτημα του E καλεί OnInteract(). |
| `InteractorUI.cs` | Interact/ | Διαχειρίζεται την εμφάνιση μηνυμάτων κειμένου από τα interactables στην οθόνη. Μέθοδοι: ShowTextMessage(), HideTextMessage(). |
| `Door.cs` | Interact/ | Υλοποιεί IInteractable. Άνοιγμα/κλείσιμο πόρτας μέσω coroutine που παρεμβάλλει (Lerp) τη γωνία περιστροφής. Υποστηρίζει ήχους και visual indicator. |
| `Chest.cs` | Interact/ | Υλοποιεί IInteractable. Άνοιγμα/κλείσιμο καπακιού μέσω coroutine. Υποστηρίζει προαιρετικό contentMessage και oneTimeOnly mode. |
| `Lever.cs` | Interact/ | Υλοποιεί IInteractable. Μοχλός που ελέγχει μια CastleGate. Υποστηρίζει toggle mode και configurable delay πριν την ενεργοποίηση της πύλης. |
| `CastleGate.cs` | Interact/ | Κάθετη πύλη (portcullis) που ελέγχεται από Lever. Μέθοδοι: Raise(), Lower(), Toggle(), SetStateImmediate(). Υποστηρίζει ήχους κίνησης. |
| `TextSign.cs` | Interact/ | Υλοποιεί IInteractable. Πινακίδα που εμφανίζει κείμενο όταν ο παίκτης αλληλεπιδρά. Χρήσιμο για σήμανση και πληροφορίες. |
| `DialogueData.cs` | Dialogue/ | ScriptableObject που περιέχει το όνομα του NPC και τις γραμμές διαλόγου του. Υποστηρίζει autoAdvanceTime για αυτόματη προώθηση. Δημιουργία: Create > MyProject > Dialogue Data. |
| `DialogueManager.cs` | Dialogue/ | Singleton που ελέγχει το UI panel διαλόγου. Μέθοδοι: StartDialogue(), AdvanceLine(), EndDialogue(). Events: OnDialogueStarted, OnDialogueEnded. Πρόσβαση μέσω DialogueManager.Instance. |
| `InteractableNPC.cs` | Dialogue/ | Υλοποιεί IInteractable. NPC που ξεκινά διάλογο όταν ο παίκτης πατήσει E. Απαιτεί Collider και tag "Interactable". |
| `ProximityNPC.cs` | Dialogue/ | NPC που ξεκινά διάλογο αυτόματα όταν ο παίκτης μπει στο trigger zone. Η κάμερα στρέφεται προς τον NPC (lookAtTarget). Υποστηρίζει triggerOnce και startDelay. |
| `AnimalData.cs` | Animals/ | ScriptableObject με παραμέτρους ζώου: moveSpeed, wanderRadius, turnSpeed, acceleration, stoppingDistance, minIdleTime, maxIdleTime, navMeshSampleDistance, maxDestinationAttempts. Δημιουργία: Create > MyProject > Animals > Animal Data. |
| `AnimalController.cs` | Animals/ | Διαχειρίζεται αυτόνομη κίνηση ζώων μέσω NavMeshAgent. State machine (Idle/Walking) με coroutine. Ελέγχει animations μέσω animator.SetFloat("Speed", velocity.magnitude). |
| `ScrollingWater.cs` | Ambient/ | UV scrolling για προσομοίωση ροής νερού. Παράμετροι: scrollSpeed (Vector2), texturePropertyName ("_BaseMap" για URP), materialIndex. |
| `CloudDrift.cs` | Ambient/ | Κίνηση σύννεφων με δύο modes: Linear (γραμμική κίνηση με wrap-around) και Rotate (περιστροφή γύρω από pivot point). |
| `AmbientSoundManager.cs` | Audio/ | Singleton. Αναπαράγει global ambient audio σε loop. Υποστηρίζει ducking μέσω SetDuckAmount(float). Παράμετροι: baseVolume, minDuckedVolume, duckLerpSpeed. |
| `ProximityAudioZone.cs` | Audio/ | Τοποθετείται σε αντικείμενα με χαρακτηριστικό ήχο. Υπολογίζει ένταση βάσει απόστασης παίκτη με Mathf.InverseLerp. Εκθέτει CurrentVolumeRatio property. |
| `AudioZoneDucker.cs` | Audio/ | Παρακολουθεί όλα τα ProximityAudioZone και καλεί SetDuckAmount() στον AmbientSoundManager βάσει του υψηλότερου CurrentVolumeRatio. Auto-finds zones στο Start(). |
| `MainMenu.cs` | UI/ | Controller για το κύριο μενού. Μέθοδοι: StartGame() (φορτώνει "GameScene1"), ExitGame() (κλείνει την εφαρμογή). |
| `PauseMenu.cs` | UI/ | Controller για το μενού παύσης. Toggle με Escape key (New Input System). Παγώνει Time.timeScale, απενεργοποιεί PlayerInput, ξεκλειδώνει cursor. Μέθοδοι: PauseGame(), ResumeGame(), GoToMainMenu(), ExitGame(). |

---

## ε. Αναλυτική Παρουσίαση Σημαντικότερων Scripts

### Script 1: `DialogueManager.cs`

`[ΣΥΜΠΛΗΡΩΣΗ]` — Επικολλήστε τον πλήρη κώδικα με σχόλια.

**Αιτιολόγηση σχεδιασμού:** Ο DialogueManager επιλέχθηκε ως singleton γιατί χρειάζεται να είναι προσβάσιμος από κάθε NPCDialogue στη σκηνή χωρίς references στον Inspector. Η λογική προώθησης γραμμών κεντροποιείται εδώ αντί να διασπαρεί σε κάθε NPC, εξασφαλίζοντας ότι ποτέ δεν μπορούν να ανοίξουν δύο διάλογοι ταυτόχρονα.

---

### Script 2: `AnimalController.cs`

`[ΣΥΜΠΛΗΡΩΣΗ]` — Επικολλήστε τον πλήρη κώδικα με σχόλια.

**Αιτιολόγηση σχεδιασμού:** Η χρήση coroutine αντί για Update-based state machine αποφεύγει τον υπολογισμό κάθε frame για ζώα που βρίσκονται σε κατάσταση Idle. Η σύνδεση με AnimalData ScriptableObject επιτρέπει ρύθμιση ανά είδος χωρίς αλλαγές κώδικα.

---

### Script 3: `ProximityAudioZone.cs`

`[ΣΥΜΠΛΗΡΩΣΗ]` — Επικολλήστε τον πλήρη κώδικα με σχόλια.

**Αιτιολόγηση σχεδιασμού:** Η χρήση `Mathf.InverseLerp` αντί για απλό threshold δίνει ομαλή μετάβαση έντασης αντί για απότομο "άναμμα" του ήχου. Το `maxVolume` field ανά zone επιτρέπει διαφορετικό "ταύλο" έντασης για κάθε τύπο ήχου.

---

### Script 4: `Interactor.cs`

`[ΣΥΜΠΛΗΡΩΣΗ]` — Επικολλήστε τον πλήρη κώδικα με σχόλια.

**Αιτιολόγηση σχεδιασμού:** Το raycast προσέγγιση αντί για sphere triggers ανά αντικείμενο σημαίνει ότι ένα μόνο script στον παίκτη χειρίζεται όλες τις αλληλεπιδράσεις. Η χρήση του interface IInteractable επιτρέπει επέκταση χωρίς αλλαγές στο Interactor.

---

### Script 5: `AudioZoneDucker.cs`

`[ΣΥΜΠΛΗΡΩΣΗ]` — Επικολλήστε τον πλήρη κώδικα με σχόλια.

**Αιτιολόγηση σχεδιασμού:** Ο διαχωρισμός της λογικής ducking από τον AmbientSoundManager σε ξεχωριστό script ακολουθεί την αρχή ενιαίας ευθύνης (Single Responsibility Principle). Κάθε script κάνει ακριβώς ένα πράγμα.

---

## στ. Πηγές Assets

| Asset | Πηγή | Άδεια |
|-------|------|-------|
| SYNTY Polygon Medieval Pack | [syntystore.com](https://syntystore.com) | `[ΣΥΜΠΛΗΡΩΣΗ]` |
| Unity Starter Assets – Third Person | Unity Asset Store | Unity EULA |
| Ursa Cubic Farm Animals | Unity Asset Store | `[ΣΥΜΠΛΗΡΩΣΗ]` |
| `[ΣΥΜΠΛΗΡΩΣΗ]` Ambient ήχοι | `[ΣΥΜΠΛΗΡΩΣΗ — π.χ. freesound.org]` | `[ΣΥΜΠΛΗΡΩΣΗ]` |
| `[ΣΥΜΠΛΗΡΩΣΗ]` Επιπλέον assets | `[ΣΥΜΠΛΗΡΩΣΗ]` | `[ΣΥΜΠΛΗΡΩΣΗ]` |

> Οι πηγές αυτές αναφέρονται επίσης **εντός του εικονικού κόσμου** στην ανακοινωτική πινακίδα της κεντρικής πλατείας, σύμφωνα με τις απαιτήσεις της εργασίας.

---

## ζ. Εγχειρίδιο Χρήστη

### Χειρισμοί

| Πλήκτρο | Ενέργεια |
|---------|----------|
| W / A / S / D | Μετακίνηση παίκτη |
| Ποντίκι | Περιστροφή κάμερας / κοίταγμα γύρω |
| E | Αλληλεπίδραση με NPC ή αντικείμενο / Προχώρημα διαλόγου |
| Shift | Τρέξιμο (Sprint) |
| Space | Άλμα |
| Esc | Μενού παύσης

### Πώς να μιλήσετε με NPCs

Πλησιάστε έναν χαρακτήρα και περιμένετε να εμφανιστεί η ένδειξη "Πάτα E". Πατήστε E για να ξεκινήσει ο διάλογος — η κίνηση απενεργοποιείται αυτόματα. Πατάτε E για να προχωράτε στις γραμμές. Ο διάλογος κλείνει από μόνος του μετά την τελευταία γραμμή.

### Πώς να αλληλεπιδράτε με πόρτες και μπαούλα

Πλησιάστε ένα αλληλεπιδραστικό αντικείμενο (πόρτα, πύλη, μπαούλο). Όταν εμφανιστεί η ένδειξη "Πάτα E", πατήστε το για να ανοίξετε ή να κλείσετε το αντικείμενο. Η κίνηση γίνεται ομαλά μέσω animation.

### Ηχητικές ζώνες

Διάφορες περιοχές του χωριού έχουν χαρακτηριστικούς ήχους που δυναμώνουν όσο πλησιάζετε. Η αγορά είναι η πιο θορυβώδης ζώνη, ενώ το τζάκι, η εκκλησία και το ρυάκι έχουν πιο ήσυχο, ατμοσφαιρικό χαρακτήρα.

### Σημεία ενδιαφέροντος

- **Αγορά** — κεντρικός χώρος, NPC σιδηρουργός, ήχοι πλήθους
- **Εκκλησία** — NPC ιερέας, διαδραστική πόρτα, ατμοσφαιρικός ήχος
- **Νεκροταφείο** — NPC νεκροθάφτης, ατμοσφαιρικό φωτισμό, ήχοι νύχτας
- **Κάστρο** — NPC φρουρός, διαδραστική πύλη, εντυπωσιακή αρχιτεκτονική
- **Ρυάκι** — χαλαρωτικό τοπίο, ήχοι νερού, ζώα
- **Κεντρική πινακίδα** — εμφανίζει πηγές όλων των assets που χρησιμοποιήθηκαν

---

## η. Screenshots

| # | Περιγραφή |
|---|-----------|
| 1 | Πανοραμική άποψη του χωριού από ψηλά |
| 2 | Σύστημα διαλόγου ανοιχτό με NPC |
| 3 | Prompt αλληλεπίδρασης μπροστά από πόρτα |
| 4 | Ζώα που περιπλανιούνται στο περιβάλλον |
| 5 | Inspector ProximityAudioZone στην αγορά |
| 6 | Εκκλησία με φωτισμό και point lights σε λαμπάδες |
| 7 | Ατμοσφαιρική λήψη νεκροταφείου |
| 8 | Lighting Settings και baked lightmap αποτέλεσμα |
| 9 | Occlusion Culling panel μετά το bake |
| 10 | LOD Group component στον Inspector του κάστρου |
| 11 | Ανακοινωτική πινακίδα με πηγές assets εντός κόσμου |
| 12 | Stats window (draw calls πριν/μετά βελτιστοποίηση) |
| 13 | Main Menu screen |
| 14 | Pause Menu ανοιχτό στο παιχνίδι |

`[SCREENSHOT x14]`

---

## θ. Αντιμετώπιση Κριτηρίων Αξιολόγησης

### Στοιχεία που διδάχθηκαν
Η εφαρμογή ενσωματώνει τα εξής στοιχεία που διδάχθηκαν στο μάθημα: NavMesh και NavMeshAgent για αυτόνομη κίνηση ζώων, trigger colliders για ανίχνευση εγγύτητας (ProximityNPC), coroutines για ομαλά animations, ScriptableObjects για διαχείριση δεδομένων (DialogueData, AnimalData), Animator Controller με Speed parameter για ζώα, Particle Systems για φλόγες, baked lighting και lightmaps, Occlusion Culling και LOD Groups για βελτιστοποίηση. Ιδιαίτερη έμφαση δόθηκε στη βελτιστοποίηση απόδοσης με συνδυασμό πολλαπλών τεχνικών.

### Βελτιστοποίηση απόδοσης
Εφαρμόστηκαν τέσσερις ξεχωριστές τεχνικές βελτιστοποίησης: static batching για μείωση draw calls, baked occlusion culling για αποφυγή rendering αόρατων αντικειμένων, LOD Groups στα μεγάλα κτίρια για μείωση polygon count σε απόσταση, και baked lightmaps για εξάλειψη real-time σκιών. Το αποτέλεσμα ήταν μείωση draw calls από `[ΣΥΜΠΛΗΡΩΣΗ]` σε `[ΣΥΜΠΛΗΡΩΣΗ]` όπως καταγράφηκε στο Stats window.

### Αληθοφάνεια
Η αληθοφάνεια εξασφαλίζεται μέσω πολλαπλών επιπέδων: οπτική συνέπεια μέσω του SYNTY pack, φυσικά πειστικός φωτισμός (ένας κεντρικός ήλιος, θερμά σημειακά φώτα σε λαμπάδες), ζώα που κινούνται εντός NavMesh χωρίς να "περνούν" μέσα από τοίχους, πόρτες που ανοίγουν φυσικά με animation, και ηχητικό περιβάλλον που αλλάζει ομαλά ανάλογα με την τοποθεσία. Κανένα αντικείμενο δεν παραβιάζει τους φυσικούς νόμους του κόσμου.

### Περιεχόμενο
Χρησιμοποιήθηκε αποκλειστικά περιεχόμενο που παραπέμπει στον πραγματικό μεσαιωνικό κόσμο — κτίρια, έπιπλα, εργαλεία, φύση, ζώα και ήχοι της εποχής. Το σύνολο των assets και των πηγών τους αναφέρεται τόσο στην ενότητα στ' του παρόντος εγχειριδίου όσο και εντός του εικονικού κόσμου στην ανακοινωτική πινακίδα της πλατείας.

### Πληρότητα
Η εφαρμογή παρέχει πλήρη, αδιάλειπτη εμπειρία εξερεύνησης: ελεύθερη πλοήγηση σε ολόκληρο τον κόσμο, διάλογος με 4 NPCs σε διαφορετικές τοποθεσίες, αλληλεπίδραση με πόρτες και μπαούλα, αυτόνομα ζώα, δυναμικό ηχητικό περιβάλλον, κινούμενα στοιχεία σε κάθε γωνία του χώρου, και ατμοσφαιρικός φωτισμός. Δεν υπάρχουν "νεκρές" ζώνες χωρίς περιεχόμενο.

### Σχεδιασμός
Ο κώδικας ακολουθεί βέλτιστες αρχές αντικειμενοστραφούς σχεδιασμού: ScriptableObjects για διαχωρισμό δεδομένων από λογική (DialogueData, AnimalData), interface (IInteractable) για επεκτάσιμα interactables, singleton managers για κεντρικές υπηρεσίες (DialogueManager, AmbientSoundManager), και component-based audio zones για modular ηχητικό σχεδιασμό. Κάθε script έχει μία και μόνο ευθύνη (Single Responsibility Principle). Η δομική πολυπλοκότητα επιλέχθηκε με γνώμονα την αναγκαιότητα και όχι την επίδειξη.

### Αισθητική
Η οπτική συνέπεια εξασφαλίζεται από την ενιαία αισθητική του SYNTY pack σε όλα τα assets. Ο φωτισμός δίνει θερμό, ατμοσφαιρικό χαρακτήρα στον χώρο. Το χρωματικό παλέτα παραμένει σε γήινες, φυσικές αποχρώσεις. Ο χώρος "προσκαλεί" τον χρήστη να εξερευνήσει χάρη στη ποικιλία σημείων ενδιαφέροντος και στα κινούμενα στοιχεία που τραβούν το βλέμμα.

### Πρωτοτυπία
Το σύστημα ηχητικής εγγύτητας με δυναμικό ducking (AudioZoneDucker) είναι ένα πρωτότυπο σύστημα που υπερβαίνει τις βασικές απαιτήσεις — δεν αρκεί στη "σιγή ή ήχο" λογική αλλά δημιουργεί ηχητική ιεράρχηση. Το ScriptableObject-driven σύστημα NPCs και ζώων επιτρέπει επέκταση χωρίς αλλαγές κώδικα. Η IInteractable interface αρχιτεκτονική είναι άμεσα επεκτάσιμη σε νέους τύπους αντικειμένων (ήδη υλοποιήθηκαν 7 διαφορετικοί τύποι: Door, Chest, Lever, CastleGate, TextSign, InteractableNPC).

### Χρηστικότητα
Η εφαρμογή απευθύνεται σε κάθε χρήστη χωρίς εκπαίδευση: οι χειρισμοί WASD + ποντίκι είναι universal στα PC παιχνίδια, το E για αλληλεπίδραση σηματοδοτείται πάντα με ορατό prompt, και δεν υπάρχουν αόρατα εμπόδια ή dead ends στο περιβάλλον. Ο κόσμος καλύπτει υπαρκτή ανάγκη: εξερεύνηση και εκπαιδευτική/τουριστική αναπαράσταση ενός μεσαιωνικού οικισμού.

### Κίνηση
Κινούμενα στοιχεία παρόντα σε όλη την εφαρμογή: particle systems σε λαμπάδες και τζάκια, UV scrolling water στο ρυάκι (ScrollingWater), σύννεφα που κινούνται/περιστρέφονται στον ουρανό (CloudDrift), ζώα που εναλλάσσουν idle και walk animation μέσω του Animator Controller με Speed parameter, NPCs με idle animations, πόρτες και μπαούλα με animated άνοιγμα/κλείσιμο, πύλη κάστρου που ανεβαίνει/κατεβαίνει.

### Λειτουργικότητα
Αλληλεπιδραστικά στοιχεία με συγκεκριμένη συμπεριφορά: NPCs με πλήρες σύστημα διαλόγου (InteractableNPC: πλησίασμα → E για εκκίνηση, ProximityNPC: αυτόματη εκκίνηση με camera look-at), πόρτες που ανοίγουν/κλείνουν με animation, πύλη κάστρου με μοχλό (Lever → CastleGate), μπαούλα με animation καπακιού και μήνυμα περιεχομένου, πινακίδες με κείμενο (TextSign), ηχητικές ζώνες που αντιδρούν δυναμικά στη θέση του παίκτη, μενού παύσης με Escape key.

---

*Εργασία εκπονήθηκε από: `[ΣΥΜΠΛΗΡΩΣΗ — ονόματα]` | Ακαδημαϊκό έτος 2025-2026*
*Τμήμα Πληροφορικής, Πανεπιστήμιο Πειραιά*
